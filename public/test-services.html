<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª</title>
    <style>
        body { font-family: Cairo, sans-serif; padding: 20px; }
        .service { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 8px; }
        .service img { max-width: 100px; float: left; margin-left: 15px; }
    </style>
</head>
<body>

    <h1>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù…Ù† Contentful</h1>
    <div id="services-list">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

    <script>
        // ğŸš§ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Contentful
        const SPACE_ID = 'b7tga4dgq6jm';
        const ACCESS_TOKEN = 'q2H03KQQh_NwQkOGr0FqbAdFTB6U8FpUOZ09Zssgzsw';

        const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/master/entries?access_token=${ACCESS_TOKEN}&content_type=service`;

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const servicesListDiv = document.getElementById('services-list');
                servicesListDiv.innerHTML = ''; // Ù…Ø³Ø­ Ø±Ø³Ø§Ù„Ø© "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„"

                if (data.items && data.items.length > 0) {
                    // We need to find the matching image assets from the 'includes' array
                    const assets = data.includes?.Asset || [];

                    data.items.forEach(item => {
                        const service = item.fields;
                        let imageUrl = 'https://placehold.co/100x100?text=No+Image';

                        // Find the image URL from the included assets
                        if (service.image) {
                            const imageAsset = assets.find(asset => asset.sys.id === service.image.sys.id);
                            if (imageAsset) {
                                imageUrl = imageAsset.fields.file.url;
                            }
                        }

                        const serviceElement = document.createElement('div');
                        serviceElement.className = 'service';
                        serviceElement.innerHTML = `
                            <img src="${imageUrl}" alt="${service.title}">
                            <h2>${service.title}</h2>
                            <p>${service.shortDescription || ''}</p>
                            <p><strong>Ø§Ù„ÙØ¦Ø©:</strong> ${service.category || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
                        `;
                        servicesListDiv.appendChild(serviceElement);
                    });
                } else {
                    servicesListDiv.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª.';
                }
            })
            .catch(error => {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                document.getElementById('services-list').textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø§Øª.';
            });
    </script>
</body>
</html>